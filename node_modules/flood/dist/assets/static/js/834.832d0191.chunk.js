(globalThis.webpackChunkflood=globalThis.webpackChunkflood||[]).push([[834],{4834:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Li});var n=i(8983),r=i(4537),l=i(150),a=i(7264),s=i(361),o=i(7294),d=i(509),c=i(1540),u=i(879);const h=({start:e,destination:t,tags:i,tab:n})=>{const r={};null!=e&&(r.startTorrentsOnLoad=e),null!=t&&""!==t&&(null==r.torrentDestinations&&(r.torrentDestinations=u.Z.floodSettings.torrentDestinations||{}),"string"==typeof(null==i?void 0:i[0])?r.torrentDestinations[i[0]]=t:r.torrentDestinations[""]=t),null!=n&&(r.UITorrentsAddTab=n),c.Z.saveSettings(r)};var m=i(9335),_=i(3529),p=i(1493),g=i(7858);const f=e=>{const{actions:t}=e,i=t.map(((e,t)=>{let i=()=>{};return e.triggerDismiss&&(i=()=>{p.Z.dismissModal()}),"checkbox"===e.type?(0,g.tZ)(d.XZ,{defaultChecked:e.checked,id:e.id,onClick:t=>{null!=e.clickHandler&&e.clickHandler(t),i()},children:e.content},t):(0,g.tZ)(d.zx,{isLoading:e.isLoading,onClick:t=>{null!=e.clickHandler&&e.clickHandler(t),i()},priority:e.type,type:e.submit?"submit":"button",children:e.content},t)})),n=(0,g.tZ)("div",{className:"modal__button-group",children:i});return(0,g.tZ)("div",{className:"modal__actions",children:n})},b=({isAddingTorrents:e,onAddTorrentsClick:t})=>{const{i18n:i}=(0,s.mV)();return(0,g.tZ)(f,{actions:[{checked:Boolean(u.Z.floodSettings.startTorrentsOnLoad),clickHandler:null,content:i._("torrents.add.start.label"),id:"start",triggerDismiss:!1,type:"checkbox"},{clickHandler:null,content:i._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:t,content:i._("torrents.add.button.add"),isLoading:e,submit:!0,triggerDismiss:!1,type:"primary"}]})};var Z=i(3279),v=i.n(Z),y=i(4656),C=i(4916),w=i(917),k=i(2227),N=i(6281),O=i(4557),S=i(5051),P=i(932);const x="#5E728C",D={name:"1pkdvdx",styles:"padding:3px 9px"},B=(0,w.iv)({borderBottom:`1px solid ${(0,k.$n)(.43,x)}`,marginBottom:"3px",paddingBottom:"3px",opacity:.75,"&:last-child":{marginBottom:0}},"",""),j=(0,w.iv)({opacity:.5,transition:"color 0.25s",whiteSpace:"nowrap",button:[D,{width:"100%",height:"100%",padding:"3px 9px",textAlign:"left","&:disabled":{pointerEvents:"none"}}]},"",""),X=(0,w.iv)({color:(0,k.p_)(.1,(0,k._j)(.15,x)),background:(0,k.m4)(x,.1),button:{":focus":{outline:"none",WebkitTapHighlightColor:"transparent"}}},"",""),T=(0,w.iv)({opacity:1,cursor:"pointer",transition:"background 0.25s, color 0.25s",userSelect:"none","&:hover":X,"&:focus-within":X},"",""),E={EACCES:"filesystem.error.eacces",ENOENT:"filesystem.error.enoent"};var M={name:"kol7nt",styles:"transform:scale(0.75) rotate(180deg)"},V={name:"1089mxj",styles:"white-space:pre-wrap"},I={name:"1ityoz",styles:"font-weight:lighter"};const R=(0,o.memo)((({directory:e,selectable:t,onItemSelection:i,onYieldFocus:n})=>{const[r,l]=(0,o.useState)(null),[a,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(e.includes("/")?"/":"\\"),[h,m]=(0,o.useState)(null),[_,p]=(0,o.useState)(null),f=(0,o.useRef)(null),b=e.lastIndexOf(c)+1,Z=b>0?e.substr(0,b):e,v=e.substr(b);(0,o.useEffect)((()=>{Z&&(l(null),m(null),p(null),S.Z.fetchDirectoryList(Z).then((({files:e,directories:t,separator:i})=>{m(t),p(e),u(i),d(null)})).catch((({response:e})=>{d(e)})))}),[Z]),(0,o.useEffect)((()=>{if(null!=f.current&&null!=r){var e;const t=null===(e=f.current.children[r])||void 0===e?void 0:e.children[0];0===(null==t?void 0:t.tabIndex)?t.focus():l(Array.from(f.current.children).findIndex((e=>0===e.children[0].tabIndex)))}}),[r]),(0,O.Z)("ArrowUp",(e=>{e.preventDefault(),l((e=>null==e||e-1<0?(null==n||n(),null):e-1))})),(0,O.Z)("ArrowDown",(e=>{e.preventDefault(),l((e=>null!=e?e+1:0))}));let y=null,k=[];if((null==h&&"directories"===t||null==_&&"files"===t)&&(y="filesystem.fetching"),a&&a.data&&a.data.code&&(y=E[a.data.code]||"filesystem.error.unknown"),e){const e=`${Z.split(c).slice(0,-2).join(c)}${c}`,n=(0,g.tZ)("li",{css:[j,T,{"@media (max-width: 720px)":B},"",""],children:(0,g.BX)("button",{type:"button",onClick:()=>null==i?void 0:i(e,!0),children:[(0,g.tZ)(C.Eh,{css:M}),".."]})},e),r="files"!==t,l=v?(0,P.Z)(h,(e=>e),v):[],a=l.includes(v)||"directories"!==t||!v||y?[]:(()=>{const e=`${Z}${v}${c}`;return[(0,g.tZ)("li",{css:[j,T,"font-weight:bold;@media (max-width: 720px){display:none;}",""],children:(0,g.BX)("button",{type:"button",onClick:()=>null==i?void 0:i(e,!1),children:[(0,g.tZ)(C.Pl,{}),(0,g.tZ)("span",{css:V,children:v}),(0,g.BX)("em",{css:I,children:[" - ",(0,g.tZ)(s.cC,{id:"filesystem.error.enoent"})]})]})},e)]})(),o=(null==h?void 0:h.length)&&(0,N.DY)(h.slice()).desc((e=>l.includes(e))).map((e=>{const t=`${Z}${e}${c}`;return(0,g.tZ)("li",{css:[j,r?T:void 0,l.includes(e)?{fontWeight:"bold"}:void 0,"",""],children:(0,g.BX)("button",{type:"button",disabled:!r,tabIndex:r?0:-1,onClick:r?()=>null==i?void 0:i(t,!0):void 0,children:[(0,g.tZ)(C.Bm,{}),e]})},t)}))||[],d="directories"!==t,u=v?(0,P.Z)(_,(e=>e),v):[],m=(null==_?void 0:_.length)&&(0,N.DY)(_.slice()).desc((e=>u.includes(e))).map((e=>{const t=`${Z}${e}`;return(0,g.tZ)("li",{css:[j,d?T:void 0,u.includes(e)?{fontWeight:"bold"}:void 0,"",""],children:(0,g.BX)("button",{type:"button",disabled:!d,tabIndex:d?0:-1,onClick:d?()=>null==i?void 0:i(t,!1):void 0,children:[(0,g.tZ)(C.$B,{}),e]})},t)}))||[];0!==o.length||0!==m.length||y||(y="filesystem.empty.directory"),k=[n,...a,...o,...m]}else y="filesystem.error.no.input";return(0,g.BX)("div",{css:(0,w.iv)({color:x,listStyle:"none",padding:"3px 0px",".icon":{fill:"currentColor",height:"14px",width:"14px",marginRight:"5px",marginTop:"-3px",verticalAlign:"middle"}},"",""),children:[Z&&(0,g.BX)("li",{css:[j,B,D,"white-space:pre-wrap;.icon{transform:scale(0.9);margin-top:-2px !important;}@media (max-width: 720px){display:none;}",""],children:[(0,g.tZ)(C.DB,{}),Z]}),(0,g.tZ)("ul",{ref:f,children:k}),y&&(0,g.tZ)("div",{css:[j,D,"opacity:1;",""],children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:y})})})]})}));R.defaultProps={selectable:void 0,onItemSelection:void 0,onYieldFocus:void 0};const L=R,F=(0,o.forwardRef)((({id:e,label:t,selectable:i,suggested:n,showBasePathToggle:r,showCompletedToggle:l,showSequentialToggle:a,onChange:c},h)=>{var m,_;const[p,f]=(0,o.useState)(n||(null===(m=u.Z.floodSettings.torrentDestinations)||void 0===m?void 0:m[""])||(null===(_=u.Z.clientSettings)||void 0===_?void 0:_.directoryDefault)||""),[b,Z]=(0,o.useState)(!1),w=(0,o.useRef)(null),k=(0,y.Z)(h),{i18n:N}=(0,s.mV)();(0,o.useEffect)((()=>{const e=()=>{Z(!1)},t=t=>{var i;null!==(i=w.current)&&void 0!==i&&i.contains(t.target)||e()};return document.addEventListener("click",t),window.addEventListener("resize",e),()=>{document.removeEventListener("click",t),window.removeEventListener("resize",e)}}),[]);const O=[];return r&&O.push((0,g.tZ)(d.XZ,{grow:!1,id:"isBasePath",children:(0,g.tZ)(s.cC,{id:"torrents.destination.base_path"})},"isBasePath")),l&&O.push((0,g.tZ)(d.XZ,{grow:!1,id:"isCompleted",children:(0,g.tZ)(s.cC,{id:"torrents.destination.completed"})},"isCompleted")),a&&O.push((0,g.tZ)(d.XZ,{grow:!1,id:"isSequential",children:(0,g.tZ)(s.cC,{id:"torrents.destination.sequential"})},"isSequential")),(0,g.BX)(d.y1,{ref:w,children:[(0,g.tZ)(d.p7,{children:(0,g.BX)(d.fE,{autoComplete:b?"off":void 0,addonPlacement:"after",defaultValue:p,id:e,label:t,onChange:v()((()=>{if(null==k.current)return;const e=k.current.value;c&&c(e),f(e)}),100,{leading:!0}),onClick:e=>e.nativeEvent.stopImmediatePropagation(),placeholder:N._("torrents.add.destination.placeholder"),ref:k,children:[(0,g.tZ)(d.G5,{onClick:()=>{null!=k.current&&f(k.current.value),Z(!b)},children:(0,g.tZ)(C.ol,{})}),(0,g.tZ)(d.h_,{children:(0,g.tZ)(d.xV,{isIn:b,onClick:e=>e.nativeEvent.stopImmediatePropagation(),overlayProps:{isInteractive:!1},padding:!1,triggerRef:k,children:(0,g.tZ)(L,{directory:p,selectable:i,onItemSelection:(e,t=!0)=>{null!=k.current&&(k.current.value=e),Z(t),f(e)},onYieldFocus:()=>{var e;null===(e=k.current)||void 0===e||e.focus()}})})})]})}),O.length>0?(0,g.tZ)(d.p7,{children:O}):null]})}));F.defaultProps={label:void 0,selectable:void 0,suggested:void 0,showBasePathToggle:!1,showCompletedToggle:!1,showSequentialToggle:!1,onChange:void 0};const $=F;var z=i(4184),U=i.n(z),H=i(1967);const A=({defaultValue:e,placeholder:t,id:i,label:n,onTagSelected:r})=>{const[l,c]=(0,o.useState)(!1),[h,m]=(0,o.useState)(e??[]),_=(0,o.useRef)(null),p=(0,o.useRef)(null),f=(0,o.useRef)(null),b=U()("select form__element",{"select--is-open":l});return(0,a.Z)("Escape",(e=>{e.preventDefault(),c(!1)})),(0,o.useEffect)((()=>{const e=e=>{var t;null!==(t=_.current)&&void 0!==t&&t.contains(e.target)||c(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,o.useEffect)((()=>{null!=f.current&&(f.current.value=h.join()),r&&r(h)}),[h,r]),(0,g.tZ)(d.U2,{ref:_,children:(0,g.tZ)("div",{className:b,children:(0,g.BX)(d.fE,{autoComplete:l?"off":void 0,id:i||"tags",addonPlacement:"after",defaultValue:e,label:n,onChange:()=>{if(null!=f.current){let e=f.current.value.split(",").map((e=>e.trim())).filter((e=>e.length>0));f.current.value.trimEnd().endsWith(",")&&(e.push(""),e=[...new Set(e)]),m(e)}},placeholder:t,ref:f,children:[(0,g.tZ)(d.G5,{onClick:()=>{c(!l)},className:"select__indicator",children:(0,g.tZ)(C.Tt,{})}),(0,g.tZ)(d.h_,{children:(0,g.tZ)(d.xV,{isIn:l,onClick:e=>{"single"!==u.Z.floodSettings.UITagSelectorMode&&e.nativeEvent.stopImmediatePropagation()},overlayProps:{isInteractive:!1},ref:p,triggerRef:f,children:[...new Set(["untagged",...(0,N.DY)(Object.keys(H.Z.taxonomy.tagCounts)).asc(),...h])].reduce(((e,t)=>(""===t||e.push((0,g.tZ)(d.Ql,{id:t,isSelected:h.includes(t),onClick:()=>{"untagged"===t?m([]):h.includes(t)?m(h.filter((e=>e!==t&&""!==e))):m([...h.filter((e=>""!==e)),t])},children:"untagged"===t?(0,g.tZ)(s.cC,{id:"filter.untagged"}):t},t)),e)),[])})})]})})})};A.defaultProps={id:"tags",label:void 0,defaultValue:void 0,placeholder:void 0,onTagSelected:void 0};const q=A,G=(e,t)=>Object.keys(e).reduce(((i,n)=>{if(n.startsWith(t)){const t=e[n];null!=t&&i.push(t)}return i}),[]),Q=({defaultValues:e,id:t,label:i,placeholder:n})=>{const r=(0,o.useRef)(0),[l,a]=(0,o.useState)(e??[{id:0,value:""}]);return(0,g.tZ)(d.y1,{children:l.map(((e,s)=>{let o=null;return s>0&&(o=(0,g.tZ)(d.G5,{onClick:()=>{const e=l.slice();e.splice(s,1),a(e)},children:(0,g.tZ)(C.eJ,{})})),(0,g.tZ)(d.p7,{children:(0,g.BX)(d.fE,{addonPlacement:"after",id:`${t}-${e.id}`,defaultValue:e.value,label:0===s&&i,placeholder:n,wrapperClassName:"textbox-repeater",children:[(0,g.tZ)(d.G5,{onClick:()=>{r.current+=1;const e=l.slice();e.splice(s+1,0,{id:r.current,value:""}),a(e)},children:(0,g.tZ)(C.Rb,{})}),o]})},e.id)}))})};Q.defaultProps={defaultValues:void 0,label:void 0,placeholder:void 0};const W=Q,Y=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(!1);return(0,g.BX)(d.l0,{className:"inverse",ref:e,children:[(0,g.tZ)($,{id:"sourcePath",label:t._("torrents.create.source.path.label")}),(0,g.tZ)(W,{id:"trackers",label:t._("torrents.create.trackers.label"),placeholder:t._("torrents.create.tracker.input.placeholder"),defaultValues:[{id:0,value:""}]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"name",label:t._("torrents.create.base.name.label"),placeholder:t._("torrents.create.base.name.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"comment",label:t._("torrents.create.comment.label"),placeholder:t._("torrents.create.comment.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"infoSource",label:t._("torrents.create.info.source.label"),placeholder:t._("torrents.create.info.source.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.XZ,{grow:!1,id:"isPrivate",children:t._("torrents.create.is.private.label")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{id:"tags",label:t._("torrents.add.tags"),placeholder:t._("torrents.create.tags.input.placeholder")})}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{if(null==e.current)return;const t=e.current.getFormData();n(!0),null!=t.sourcePath&&(m.Z.createTorrent({name:t.name,sourcePath:t.sourcePath,trackers:G(t,"trackers"),comment:t.comment,infoSource:t.infoSource,isPrivate:t.isPrivate||!1,start:t.start||!1,tags:null!=t.tags?t.tags.split(","):void 0}).then((()=>{_.Z.dismissModal()})),h({start:t.start,destination:t.sourcePath,tab:"by-creation"}))},isAddingTorrents:i})]})};var J=i(463);function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ee(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach((function(t){te(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ie=({onFilesChanged:e})=>{const[t,i]=(0,o.useState)([]);return(0,o.useEffect)((()=>{e(t)}),[t,e]),(0,g.BX)(d.U2,{children:[(0,g.tZ)("span",{className:"form__element__label",children:(0,g.tZ)(s.cC,{id:"torrents.add.torrents.label"})}),t.length>0?(0,g.tZ)("div",{onClick:e=>{e.stopPropagation()},role:"none",children:(0,g.tZ)("ul",{className:"dropzone__selected-files interactive-list",children:t.map(((e,n)=>(0,g.BX)("li",{className:"dropzone__selected-files__file interactive-list__item",title:e.name,children:[(0,g.tZ)("span",{className:"interactive-list__icon",children:(0,g.tZ)(C.$B,{})}),(0,g.tZ)("span",{className:"interactive-list__label",children:e.name}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>{const e=t.slice();e.splice(n,1),i(e)},children:(0,g.tZ)(C.x8,{})})]},e.name)))})}):null,(0,g.tZ)(J.Z,{onDrop:e=>{const n=[];e.forEach((r=>{const l=new FileReader;l.onload=l=>{var a;null!=(null===(a=l.target)||void 0===a?void 0:a.result)&&"string"==typeof l.target.result&&n.push({name:r.name,data:l.target.result.split("base64,")[1]}),n.length===e.length&&i(t.concat(n))},l.readAsDataURL(r)}))},children:({getRootProps:e,getInputProps:t,isDragActive:i})=>(0,g.BX)("div",ee(ee({},e()),{},{className:"form__dropzone dropzone interactive-list "+(i?"dropzone--is-dragging":""),children:[(0,g.tZ)("input",ee({},t())),(0,g.BX)("div",{className:"dropzone__copy",children:[(0,g.tZ)("div",{className:"dropzone__icon",children:(0,g.tZ)(C.hv,{})}),(0,g.tZ)(s.cC,{id:"torrents.add.tab.file.drop"})," ",(0,g.tZ)("span",{className:"dropzone__browse-button",children:(0,g.tZ)(s.cC,{id:"torrents.add.tab.file.browse"})}),"."]})]}))})]})},ne=()=>{const e=(0,o.useRef)([]),t=(0,o.useRef)(null),i=(0,o.useRef)(null),[n,r]=(0,o.useState)(!1),{i18n:l}=(0,s.mV)();return(0,g.BX)(d.l0,{className:"inverse",ref:t,children:[(0,g.tZ)(d.p7,{children:(0,g.tZ)(ie,{onFilesChanged:t=>{e.current=t}})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{label:l._("torrents.add.tags"),id:"tags",onTagSelected:e=>{if(null!=i.current){var t;const n=null===(t=u.Z.floodSettings.torrentDestinations)||void 0===t?void 0:t[e[0]];"string"==typeof n&&null!=i.current&&(i.current.value=n,i.current.dispatchEvent(new Event("input",{bubbles:!0})))}}})}),(0,g.tZ)($,{id:"destination",label:l._("torrents.add.destination.label"),ref:i,selectable:"directories",showBasePathToggle:!0,showCompletedToggle:!0,showSequentialToggle:!0}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{var i;if(null==t.current)return;const n=null===(i=t.current)||void 0===i?void 0:i.getFormData();r(!0);const{destination:l,start:a,tags:s,isBasePath:o,isCompleted:d,isSequential:c}=n,u=[];if(e.current.forEach((e=>{u.push(e.data)})),0===u.length||null==l)return void r(!1);const p=null!=s?s.split(",").filter((e=>e.length>0)):void 0;m.Z.addTorrentsByFiles({files:u,destination:l,tags:p,isBasePath:o,isCompleted:d,isSequential:c,start:a}).then((()=>{_.Z.dismissModal()})),h({start:a,destination:l,tags:p,tab:"by-file"})},isAddingTorrents:n})]})};var re=i(4355);var le={name:"izrr19",styles:"float:right;:focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"},ae={name:"1rawn5e",styles:"font-size:0.8em"};const se=()=>{var e,t;const i=(0,o.useRef)(null),n=(0,o.useRef)(null),[r,l]=(0,o.useState)(!1),{i18n:a}=(0,s.mV)();return(0,g.BX)(d.l0,{className:"inverse",ref:i,children:[(0,g.tZ)(W,{id:"urls",label:(0,g.BX)("div",{children:[a._("torrents.add.torrents.label"),"function"==typeof navigator.registerProtocolHandler&&(0,g.tZ)("button",{css:le,type:"button",onClick:()=>{"function"==typeof navigator.registerProtocolHandler&&navigator.registerProtocolHandler("magnet",`${re.Z.baseURI}?action=add-urls&url=%s`,"Magnet -> Flood")},children:(0,g.tZ)("em",{css:ae,children:a._("torrents.add.tab.url.register.magnet.handler")})})]}),placeholder:a._("torrents.add.tab.url.input.placeholder"),defaultValues:"add-torrents"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&(null===(t=_.Z.activeModal)||void 0===t?void 0:t.initialURLs)||[{id:0,value:""}]}),(0,g.tZ)(W,{id:"cookies",label:a._("torrents.add.cookies.label"),placeholder:a._("torrents.add.cookies.input.placeholder")}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{id:"tags",label:a._("torrents.add.tags"),onTagSelected:e=>{if(null!=n.current){var t;const i=null===(t=u.Z.floodSettings.torrentDestinations)||void 0===t?void 0:t[e[0]];"string"==typeof i&&null!=n.current&&(n.current.value=i,n.current.dispatchEvent(new Event("input",{bubbles:!0})))}}})}),(0,g.tZ)($,{id:"destination",label:a._("torrents.add.destination.label"),ref:n,selectable:"directories",showBasePathToggle:!0,showCompletedToggle:!0,showSequentialToggle:!0}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{if(null==i.current)return;const e=i.current.getFormData();l(!0);const t=G(e,"urls").filter((e=>""!==e));if(0===t.length||null==e.destination)return void l(!1);const n=G(e,"cookies"),r=t[0].startsWith("http")&&t[0].split("/")[2],a=r?{[r]:n}:void 0,s=null!=e.tags?e.tags.split(",").filter((e=>e.length>0)):void 0;m.Z.addTorrentsByUrls({urls:t,cookies:a,destination:e.destination,isBasePath:e.isBasePath,isCompleted:e.isCompleted,isSequential:e.isSequential,start:e.start,tags:s}).then((()=>{_.Z.dismissModal()})),h({start:e.start,destination:e.destination,tags:s,tab:"by-url"})},isAddingTorrents:r})]})};var oe={name:"1gxvag8",styles:":focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"};const de=e=>{const{activeTabId:t,tabs:i={},onTabChange:n}=e,r=Object.keys(i).map((e=>{const r=i[e];r.id=e;const l=U()("modal__tab",{"is-active":e===t});return(0,g.tZ)("li",{className:l,children:(0,g.tZ)("button",{css:oe,type:"button",onClick:()=>{n&&n(r)},children:r.label})},e)}));return(0,g.tZ)("ul",{className:"modal__tabs",children:r})};de.defaultProps={tabs:{}};const ce=de;function ue(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function he(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(i),!0).forEach((function(t){me(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _e=e=>{const{alignment:t,size:i,orientation:n,tabsInBody:r,inverse:l,initialTabId:a,className:s,content:d,heading:c,tabs:u,actions:h}=e,m=U()("modal__content__wrapper",`modal--align-${t}`,`modal--size-${i}`,{"modal--horizontal":"horizontal"===n,"modal--vertical":"vertical"===n,"modal--tabs-in-header":!r,"modal--tabs-in-body":r,inverse:l},s);let _=d;const p=c,b=U()("modal__header",{"has-tabs":u});let Z,v,y;const[C,w]=(0,o.useState)(a??Object.keys(u||{})[0]);if(u){const e=u[C],t=U()("modal__content",e.modalContentClasses),i=e.content,n=e.props,l=(0,g.tZ)(ce,{activeTabId:C,onTabChange:e=>{null!=e.id&&w(e.id)},tabs:u},"modal-tabs");r?Z=l:y=l,_=[Z,(0,g.tZ)("div",{className:t,children:(0,g.tZ)(i,he({},n))},"modal-content")]}return h&&(v=(0,g.tZ)("div",{className:"modal__footer",children:(0,g.tZ)(f,{actions:h})})),(0,g.BX)("div",{className:m,children:[(0,g.BX)("div",{className:b,children:[p,y]}),(0,g.BX)("div",{className:"modal__body",children:[_,v]})]})};_e.defaultProps={alignment:"left",className:null,inverse:!0,size:"medium",orientation:"horizontal",tabsInBody:!1,content:void 0,actions:void 0,tabs:void 0,initialTabId:void 0};const pe=_e,ge=()=>{var e,t;const{i18n:i}=(0,s.mV)(),n={"by-url":{content:se,label:i._("torrents.add.tab.url.title")},"by-file":{content:ne,label:i._("torrents.add.tab.file.title")},"by-creation":{content:Y,label:i._("torrents.add.tab.create.title")}};if("add-torrents"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;let r="by-url";return null!==(t=_.Z.activeModal.initialURLs)&&void 0!==t&&t.length||(r=u.Z.floodSettings.UITorrentsAddTab??r),(0,g.tZ)(pe,{heading:i._("torrents.add.heading"),tabs:n,initialTabId:r})},fe=(0,l.Pi)((()=>{var e;if("confirm"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const{actions:t,content:i,heading:n}=_.Z.activeModal||{};return(0,g.tZ)(pe,{actions:t,content:(0,g.tZ)("div",{className:"modal__content",children:i}),heading:n})}));var be=i(9669),Ze=i.n(be),ve=i(8949);function ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ce=new class{constructor(){ye(this,"feeds",[]),ye(this,"rules",[]),ye(this,"items",[]),(0,ve.ky)(this)}setFeeds(e){this.feeds=null!=e?[...e].sort(((e,t)=>e.label.localeCompare(t.label))):[]}setRules(e){this.rules=null!=e?[...e].sort(((e,t)=>e.label.localeCompare(t.label))):[]}handleFeedMonitorsFetchSuccess(e){this.setFeeds(e.feeds),this.setRules(e.rules)}handleItemsFetchSuccess(e){this.items=e}},{baseURI:we}=re.Z,ke={addFeed:e=>Ze().put(`${we}api/feed-monitor/feeds`,e).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),modifyFeed:(e,t)=>Ze().patch(`${we}api/feed-monitor/feeds/${e}`,t).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),addRule:e=>Ze().put(`${we}api/feed-monitor/rules`,e).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),fetchFeedMonitors:()=>Ze().get(`${we}api/feed-monitor`).then((e=>e.data)).then((e=>{Ce.handleFeedMonitorsFetchSuccess(e)}),(()=>{})),fetchItems:({id:e,search:t})=>Ze().get(`${we}api/feed-monitor/feeds/${e}/items`,{params:{search:t}}).then((e=>e.data)).then((e=>{Ce.handleItemsFetchSuccess(e)}),(()=>{})),removeFeedMonitor:e=>Ze().delete(`${we}api/feed-monitor/${e}`).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()}),(()=>{}))},Ne=ke,Oe=/^(?:https?|ftp):\/\/.{1,}\.{1}.{1,}/,Se=e=>null!=e&&""!==e,Pe=e=>{try{new RegExp(e)}catch(e){return!1}return!0},xe=({rule:e,isSubmitting:t,isPatternMatched:i,onCancel:n})=>{var r;const{feeds:l}=Ce,{i18n:a}=(0,s.mV)();return(0,g.BX)(d.y1,{children:[(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"label",label:a._("feeds.label"),defaultValue:e.label}),(0,g.tZ)(d.Ph,{disabled:!l.length,id:"feedID",label:a._("feeds.applicable.feed"),defaultID:null===(r=e.feedIDs)||void 0===r?void 0:r[0],children:0===l.length?[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.available"})})},"empty")]:l.reduce(((e,t)=>e.concat((0,g.tZ)(d.Ql,{id:`${t._id}`,children:t.label},t._id))),[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.select.feed"})})},"select-feed")])})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"match",label:a._("feeds.match.pattern"),placeholder:a._("feeds.regEx"),defaultValue:e.match,width:"three-eighths"}),(0,g.tZ)(d.fE,{id:"exclude",label:a._("feeds.exclude.pattern"),placeholder:a._("feeds.regEx"),defaultValue:e.exclude,width:"three-eighths"})]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{addonPlacement:"after",id:"check",label:a._("feeds.test.match"),placeholder:a._("feeds.check"),children:i&&(0,g.tZ)(d.G5,{children:(0,g.tZ)(C.FV,{})})})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.U2,{children:(0,g.tZ)($,{id:"destination",label:a._("feeds.torrent.destination"),selectable:"directories",suggested:e.destination,showBasePathToggle:!0})}),(0,g.tZ)(q,{id:"tags",label:a._("feeds.apply.tags"),placeholder:a._("feeds.tags"),defaultValue:e.tags})]}),(0,g.BX)(d.p7,{align:"end",justify:"end",children:[(0,g.tZ)("br",{}),(0,g.tZ)(d.XZ,{id:"startOnLoad",defaultChecked:e.startOnLoad,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"feeds.start.on.load"})}),(0,g.tZ)(d.zx,{onClick:n,children:(0,g.tZ)(s.cC,{id:"button.cancel"})}),(0,g.tZ)(d.zx,{type:"submit",isLoading:t,children:(0,g.tZ)(s.cC,{id:"button.save.feed"})})]})]})},De=({children:e})=>(0,g.tZ)("h2",{className:"h4",children:e}),Be=(0,l.Pi)((({currentRule:e,onSelect:t,onRemove:i})=>{const{rules:n}=Ce;return 0===n.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)(s.cC,{id:"feeds.no.rules.defined"})})}):(0,g.tZ)("ul",{className:"interactive-list",children:n.map((n=>{const r=n.count||0;let l=null,a=null;if(n.exclude&&(l=(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:[(0,g.tZ)(s.cC,{id:"feeds.exclude"}),": ",n.exclude]})),n.tags&&n.tags.length>0){const e=n.tags.map((e=>(0,g.tZ)("span",{className:"tag",children:e},e)));a=(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:[(0,g.tZ)(s.cC,{id:"feeds.tags"}),": ",e]})}return(0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content",children:[(0,g.BX)("div",{className:"interactive-list__label",children:[(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:n.label}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--secondary",children:(0,g.tZ)(s.cC,{id:"feeds.match.count",values:{count:r}})}),n===e&&(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:"Modifying"})]}),(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",style:{maxWidth:"50%",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,g.tZ)(s.cC,{id:"feeds.match"}),": ",n.match]}),(0,g.tZ)("div",{style:{width:"100%"}}),l,a]})]}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action",type:"button",onClick:()=>t(n),children:(0,g.tZ)(C.I8,{})}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>i(n),children:(0,g.tZ)(C.x8,{})})]},n._id)}))})}));function je(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Xe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?je(Object(i),!0).forEach((function(t){Te(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):je(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ee={label:"",feedIDs:[],match:"",exclude:"",tags:[],destination:"",startOnLoad:!1},Me={destination:{isValid:Se,error:"feeds.validation.must.specify.destination"},feedID:{isValid:e=>Se(e)&&"placeholder"!==e,error:"feeds.validation.must.select.feed"},label:{isValid:Se,error:"feeds.validation.must.specify.label"},match:{isValid:e=>Se(e)&&Pe(e),error:"feeds.validation.invalid.regular.expression"},exclude:{isValid:e=>!Se(e)||Pe(e),error:"feeds.validation.invalid.regular.expression"}},Ve=(e,t)=>{var i,n;return null!==(i=Me[e])&&void 0!==i&&i.isValid(t)||null===(n=Me[e])||void 0===n?void 0:n.error},Ie=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(null),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[m,_]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1);return(0,g.BX)(d.l0,{className:"inverse",onChange:({event:e,formData:t})=>{const i=e.target.name,n=t;l(Xe(Xe({},r),{},{[i]:Ve(i,n[i])})),f((()=>{const{check:e,match:t="",exclude:i=""}=n;if(Se(e)&&Pe(t)&&Pe(i)){const n=new RegExp(t,"gi").test(e),r=""!==i&&new RegExp(i,"gi").test(e);return n&&!r}return!1})()),_(!0)},onSubmit:async()=>{if(null==e.current)return;const t=e.current.getFormData(),r=Object.keys(Me).reduce(((e,i)=>{const n=i;return Xe(Xe({},e),{},{[n]:Ve(n,t[n])})}),{});l(r);const a=Object.keys(r).every((e=>void 0===r[e]));var s;m&&a&&(h(!0),null!=(null==i?void 0:i._id)&&await Ne.removeFeedMonitor(i._id),await Ne.addRule({label:t.label??Ee.label,feedIDs:[t.feedID??""],field:t.field,match:t.match??Ee.match,exclude:t.exclude??Ee.exclude,destination:t.destination??Ee.destination,tags:(null===(s=t.tags)||void 0===s?void 0:s.split(","))??Ee.tags,startOnLoad:t.startOnLoad??Ee.startOnLoad,isBasePath:t.isBasePath??!1}).then((()=>{var t;null===(t=e.current)||void 0===t||t.resetForm(),l({}),n(null),c(!1)}),(()=>{l({backend:"general.error.unknown"})})),h(!1))},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.existing.rules"})}),Object.keys(r).reduce(((e,i)=>(null!=r[i]&&e.push((0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:t._(null==r?void 0:r[i])})},`error-${i}`)),e)),[]),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.tZ)(Be,{currentRule:i,onSelect:e=>{n(e),c(!0)},onRemove:e=>{null!=e._id&&Ne.removeFeedMonitor(e._id),e===i&&(n(null),c(!1))}})})}),a?(0,g.tZ)(xe,{rule:i??Ee,isPatternMatched:p,isSubmitting:u,onCancel:()=>{n(null),c(!1)}}):(0,g.BX)(d.p7,{align:"end",justify:"end",children:[(0,g.tZ)("br",{}),(0,g.tZ)(d.zx,{onClick:()=>{c(!0)},children:(0,g.tZ)(s.cC,{id:"button.new"})})]})]})},Re=({currentFeed:e,defaultFeed:t,intervalMultipliers:i,isSubmitting:n,onCancel:r})=>{const{i18n:l}=(0,s.mV)(),a=(null==e?void 0:e.interval)??t.interval;let o=a,c=1;return i.forEach((e=>{const t=e.value;a%t==0&&(o=a/t,c=t)})),(0,g.BX)(d.y1,{children:[(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"label",label:l._("feeds.label"),placeholder:l._("feeds.label"),defaultValue:(null==e?void 0:e.label)??t.label}),(0,g.tZ)(d.fE,{id:"interval",label:l._("feeds.select.interval"),placeholder:l._("feeds.interval"),defaultValue:o,width:"one-eighth"}),(0,g.tZ)(d.Ph,{labelOffset:!0,defaultID:c,id:"intervalMultiplier",width:"one-eighth",children:i.map((e=>(0,g.tZ)(d.Ql,{id:e.value,children:l._(e.message)},e.value)))})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"url",label:l._("feeds.url"),placeholder:l._("feeds.url"),defaultValue:(null==e?void 0:e.url)??(null==t?void 0:t.url)}),(0,g.tZ)(d.zx,{labelOffset:!0,onClick:r,children:(0,g.tZ)(s.cC,{id:"button.cancel"})}),(0,g.tZ)(d.zx,{labelOffset:!0,type:"submit",isLoading:n,children:(0,g.tZ)(s.cC,{id:"button.save.feed"})})]})]})},Le=(0,l.Pi)((({selectedFeedID:e})=>{const{items:t}=Ce,i=[];if(e){const e={};t.forEach(((t,n)=>{let{title:r}=t;const l=e[r];null==l?e[r]=2:(r=`${r} #${l}`,e[r]+=1),i.push((0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content feed-list__feed",children:[(0,g.tZ)("div",{className:"interactive-list__label feed-list__feed-label",children:r}),(0,g.tZ)(d.XZ,{id:`${n}`})]},r))}))}return(0,g.tZ)(d.p7,{children:0===i.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)("div",{className:"interactive-list__label",children:(0,g.tZ)(s.cC,{id:"feeds.no.items.matching"})})})}):(0,g.tZ)("ul",{className:"interactive-list feed-list",children:i})})})),Fe=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),t=(0,o.useRef)(null),[i,n]=(0,o.useState)(null),{feeds:r}=Ce;return null!=i&&(r.some((e=>e._id===i))||n(null)),(0,g.BX)(d.l0,{className:"inverse",onChange:({event:e,formData:t})=>{const i=t;"checkbox"!==e.target.type&&(n(i.feedID),Ne.fetchItems({id:i.feedID,search:i.search}))},onSubmit:()=>{if(null==t.current)return;const e=t.current.getFormData(),i=Ce.items.filter(((t,i)=>e[i])).map(((e,t)=>({id:t,value:e.urls[0]})));p.Z.displayModal({id:"add-torrents",initialURLs:i})},ref:t,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.browse.feeds"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Ph,{disabled:!r.length,grow:!1,id:"feedID",label:e._("feeds.select.feed"),width:"three-eighths",children:r.length?r.reduce(((e,t)=>null==t._id?e:e.concat((0,g.tZ)(d.Ql,{id:t._id,children:t.label},t._id))),[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.select.feed"})})},"select-feed")]):[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.available"})})},"empty")]}),i&&(0,g.tZ)(d.fE,{id:"search",label:e._("feeds.search.term"),placeholder:e._("feeds.search")}),i&&(0,g.tZ)(d.zx,{type:"submit",labelOffset:!0,children:(0,g.tZ)(s.cC,{id:"button.download"})},"button")]}),i&&(0,g.tZ)(Le,{selectedFeedID:i})]})})),$e=(0,l.Pi)((({currentFeed:e,intervalMultipliers:t,onSelect:i,onRemove:n})=>{const{feeds:r}=Ce,{i18n:l}=(0,s.mV)();return 0===r.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.defined"})})}):(0,g.tZ)("ul",{className:"interactive-list feed-list",children:r.map((r=>{const a=r.count||0;let o=`${r.interval}`,d=t[0].message;return t.forEach((e=>{r.interval%e.value==0&&(o=""+r.interval/e.value,d=e.message)})),(0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content feed-list__feed",children:[(0,g.BX)("div",{className:"interactive-list__label",children:[(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:r.label}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--secondary",children:(0,g.tZ)(s.cC,{id:"feeds.match.count",values:{count:a}})}),r===e&&(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:"Modifying"})]}),(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:`${o} ${l._(d)}`}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--tertiary",children:(0,g.tZ)("a",{href:r.url,rel:"noopener noreferrer",target:"_blank",children:r.url})})]})]}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action",type:"button",onClick:()=>i(r),children:(0,g.tZ)(C.I8,{})}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>n(r),children:(0,g.tZ)(C.x8,{})})]},r._id)}))})}));function ze(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ue(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(i),!0).forEach((function(t){He(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ze(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function He(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ae={url:{isValid:e=>null!=e&&""!==e&&null!==e.match(Oe),error:"feeds.validation.must.specify.valid.feed.url"},label:{isValid:Se,error:"feeds.validation.must.specify.label"},interval:{isValid:e=>{if(null===e||""===e)return!1;const t=parseInt(`${e}`,10);return!Number.isNaN(t)&&t>0},error:"feeds.validation.interval.not.positive"}},qe=(e,t)=>{var i,n;return null!==(i=Ae[e])&&void 0!==i&&i.isValid(t)||null===(n=Ae[e])||void 0===n?void 0:n.error},Ge=[{message:"feeds.time.min",value:1},{message:"feeds.time.hr",value:60},{message:"feeds.time.day",value:1440}],Qe={label:"",interval:5,url:""},We=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(null),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1);return(0,g.BX)("div",{children:[(0,g.BX)(d.l0,{className:"inverse",onChange:({event:e,formData:t})=>{const i=e.target.name,n=t;l(Ue(Ue({},r),{},{[i]:qe(i,n[i])}))},onSubmit:async()=>{var t;const r=null===(t=e.current)||void 0===t?void 0:t.getFormData();if(null==e.current||null==r)return;h(!0);const a=Object.keys(Ae).reduce(((e,t)=>{const i=t;return Ue(Ue({},e),{},{[i]:qe(i,r[i])})}),{});l(a);if(Object.keys(a).every((e=>void 0===a[e]))){const t={label:r.label,url:r.url,interval:Number(r.interval)*Number(r.intervalMultiplier)};let a=!0;try{null===i?await Ne.addFeed(t):null!=(null==i?void 0:i._id)&&await Ne.modifyFeed(i._id,t)}catch{a=!1}a?(e.current.resetForm(),l({}),n(null),c(!1)):l({backend:"general.error.unknown"})}h(!1)},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.existing.feeds"})}),Object.keys(r).reduce(((e,i)=>(null!=r[i]&&e.push((0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:t._(null==r?void 0:r[i])})},`error-${i}`)),e)),[]),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.tZ)($e,{currentFeed:i,intervalMultipliers:Ge,onSelect:e=>{n(e),c(!0)},onRemove:e=>{e===i&&(a&&(l({}),c(!1)),n(null)),null!=e._id&&Ne.removeFeedMonitor(e._id)}})})}),a?(0,g.tZ)(Re,{currentFeed:i,defaultFeed:Qe,intervalMultipliers:Ge,isSubmitting:u,onCancel:()=>{l({}),c(!1),n(null)}}):(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.U2,{width:"auto"}),(0,g.tZ)(d.zx,{onClick:()=>{c(!0)},children:(0,g.tZ)(s.cC,{id:"button.new"})})]})]}),(0,g.tZ)(Fe,{})]})},Ye=()=>{const{i18n:e}=(0,s.mV)();(0,o.useEffect)((()=>{Ne.fetchFeedMonitors()}),[]);const t={feeds:{content:We,label:e._("feeds.tabs.feeds")},downloadRules:{content:Ie,label:e._("feeds.tabs.download.rules")}};return(0,g.tZ)(pe,{heading:e._("feeds.tabs.heading"),orientation:"horizontal",size:"large",tabs:t})};var Je=i(4936);let Ke;!function(e){e[e.HTTP=1]="HTTP",e[e.UDP=2]="UDP",e[e.DHT=3]="DHT"}(Ke||(Ke={}));const et=(e,t)=>{let i=`magnet:?xt=urn:btih:${e}`;return null!=t&&t.length&&t.forEach((e=>{i=`${i}&tr=${encodeURI(e)}`})),i},tt=()=>{var e;const t=(0,o.useRef)(null),i=(0,o.useRef)(null),{i18n:n}=(0,s.mV)(),[r,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)({isLoadingTrackers:!0,magnetTrackersLink:""});(0,o.useEffect)((()=>{m.Z.fetchTorrentTrackers(Je.Z.selectedTorrents[0]).then((e=>{null!=e&&h({isLoadingTrackers:!1,magnetTrackersLink:et(Je.Z.selectedTorrents[0],e.filter((e=>e.type!==Ke.DHT)).map((e=>e.url)))})}))}),[]);const _=et(Je.Z.selectedTorrents[0]);return(0,g.tZ)(pe,{heading:n._("torrents.generate.magnet.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.BX)(d.l0,{children:[null!==(e=Je.Z.torrents[Je.Z.selectedTorrents[0]])&&void 0!==e&&e.isPrivate?(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:n._("torrents.generate.magnet.private.torrent")})}):null,(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"magnet",ref:t,addonPlacement:"after",label:n._("torrents.generate.magnet.magnet"),defaultValue:_,readOnly:!0,children:(0,g.tZ)(d.G5,{onClick:()=>{var e;if("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText))navigator.clipboard.writeText(_).then((()=>{l(!0)}));else if(null!=t.current){var i;null===(i=t.current)||void 0===i||i.select(),document.execCommand("copy"),l(!0)}},children:r?(0,g.tZ)(C.FV,{}):(0,g.tZ)(C.TU,{})})})}),(0,g.tZ)(d.p7,{children:u.isLoadingTrackers?(0,g.tZ)(d.fE,{id:"loading",label:n._("torrents.generate.magnet.magnet.with.trackers"),placeholder:n._("torrents.generate.magnet.loading.trackers"),disabled:!0}):(0,g.tZ)(d.fE,{id:"magnet-trackers",ref:i,addonPlacement:"after",label:n._("torrents.generate.magnet.magnet.with.trackers"),defaultValue:u.magnetTrackersLink,readOnly:!0,children:(0,g.tZ)(d.G5,{onClick:()=>{var e;if("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText))navigator.clipboard.writeText(u.magnetTrackersLink).then((()=>{c(!0)}));else if(null!=i.current){var t;null===(t=i.current)||void 0===t||t.select(),document.execCommand("copy"),c(!0)}},children:a?(0,g.tZ)(C.FV,{}):(0,g.tZ)(C.TU,{})})})})]})}),actions:[{clickHandler:null,content:n._("button.close"),triggerDismiss:!0,type:"tertiary"}]})},it=e=>{const t=e[0];if(!e.some((e=>!e.includes(t))))return t},nt=()=>{const{i18n:e}=(0,s.mV)(),[t,i]=(0,o.useState)(!1);return(0,g.tZ)(pe,{heading:e._("torrents.move.heading"),content:(0,g.tZ)("div",{className:"modal__content",children:(0,g.BX)(d.l0,{className:"inverse",onSubmit:({formData:e})=>{const t=Je.Z.selectedTorrents;t.length>0&&(i(!0),m.Z.moveTorrents({hashes:t,destination:e.destination,isBasePath:e.isBasePath,moveFiles:e.moveFiles,isCheckHash:e.isCheckHash}).then((()=>{_.Z.dismissModal(),i(!1)})))},children:[(0,g.tZ)($,{id:"destination",selectable:"directories",suggested:it(Je.Z.selectedTorrents.map((e=>Je.Z.torrents[e].directory))),showBasePathToggle:!0}),(0,g.tZ)(f,{actions:[{checked:!0,content:e._("torrents.move.data.label"),id:"moveFiles",type:"checkbox"},{checked:!1,content:e._("torrents.move.check_hash.label"),id:"isCheckHash",type:"checkbox"},{content:e._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{content:e._("torrents.move.button.set.location"),isLoading:t,submit:!0,type:"primary"}]})]})})})},rt=()=>{const{i18n:e}=(0,s.mV)(),[t,i]=(0,o.useState)(!1),{selectedTorrents:n}=Je.Z;return 0===n.length?(0,g.tZ)(pe,{heading:e._("torrents.remove"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(s.cC,{id:"torrents.remove.error.no.torrents.selected"})})})}),actions:[{clickHandler:null,content:e._("button.ok"),triggerDismiss:!0,type:"primary"}]}):(0,g.tZ)(pe,{heading:e._("torrents.remove"),content:(0,g.tZ)("div",{className:"modal__content",children:(0,g.BX)(d.l0,{className:"inverse",onSubmit:({formData:e})=>{i(!0);const t=e.deleteData;m.Z.deleteTorrents({hashes:Je.Z.selectedTorrents,deleteData:t}).then((()=>{i(!1),(({deleteData:e})=>{null!=e&&c.Z.saveSetting("deleteTorrentData",e)})({deleteData:t}),_.Z.dismissModal()}))},children:[(0,g.tZ)(d.p7,{children:(0,g.tZ)(s.cC,{id:"torrents.remove.are.you.sure",values:{count:n.length}})}),(0,g.tZ)(f,{actions:[{checked:u.Z.floodSettings.deleteTorrentData,content:e._("torrents.remove.delete.data"),id:"deleteData",type:"checkbox"},{content:e._("button.no"),triggerDismiss:!0,type:"tertiary"},{content:e._("button.yes"),isLoading:t,submit:!0,type:"primary"}]})]})})})},lt=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(!1);return(0,g.tZ)(pe,{heading:t._("torrents.set.tags.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{ref:e,children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{defaultValue:Je.Z.selectedTorrents.map((e=>Je.Z.torrents[e].tags))[0].slice(),id:"tags",placeholder:t._("torrents.set.tags.enter.tags")})})})}),actions:[{content:t._("button.cancel"),clickHandler:null,triggerDismiss:!0,type:"tertiary"},{content:t._("torrents.set.tags.button.set"),clickHandler:()=>{if(null==e.current)return;const{selectedTorrents:t}=Je.Z,i=e.current.getFormData(),r=i.tags?i.tags.split(","):[];n(!0),(null==t?void 0:t.length)>0&&m.Z.setTags({hashes:t,tags:r})},isLoading:i,triggerDismiss:!1,type:"primary"}]})},at=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)({isLoadingTrackers:!0,trackerURLs:[]});return(0,o.useEffect)((()=>{m.Z.fetchTorrentTrackers(Je.Z.selectedTorrents[0]).then((e=>{null!=e&&l({isLoadingTrackers:!1,trackerURLs:e.filter((e=>e.type!==Ke.DHT)).map((e=>e.url))})}))}),[]),(0,g.tZ)(pe,{heading:t._("torrents.set.trackers.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{ref:e,children:r.isLoadingTrackers?(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"loading",placeholder:t._("torrents.set.trackers.loading.trackers"),disabled:!0})}):(0,g.tZ)(W,{id:"trackers",placeholder:t._("torrents.set.trackers.enter.tracker"),defaultValues:0===r.trackerURLs.length?void 0:r.trackerURLs.map(((e,t)=>({id:t,value:e})))})})}),actions:[{clickHandler:null,content:t._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:()=>{if(null==e.current||i||r.isLoadingTrackers)return;n(!0);const t=e.current.getFormData(),l=G(t,"trackers").filter((e=>""!==e));m.Z.setTrackers({hashes:Je.Z.selectedTorrents,trackers:l}).then((()=>{n(!1),_.Z.dismissModal()}))},content:t._("torrents.set.trackers.button.set"),isLoading:i||r.isLoadingTrackers,triggerDismiss:!1,type:"primary"}]})},st="4.6.0",ot=(0,o.lazy)((()=>i.e(443).then(i.t.bind(i,6641,23)).then((e=>({default:e.react}))))),dt="https://github.com/jesec/flood",ct=()=>(0,g.tZ)(o.Suspense,{fallback:null,children:(0,g.tZ)(ot,{FloodVersion:()=>st,CommitBadge:()=>st.length>8?(0,g.tZ)("a",{href:dt,children:(0,g.tZ)("img",{alt:"Latest version of rolling build",src:"https://img.shields.io/npm/v/@jesec/flood?label=HEAD"})}):(0,g.tZ)("a",{href:dt,children:(0,g.tZ)("img",{alt:"Commits since user's version",src:`https://img.shields.io/github/commits-since/jesec/flood/v${st}`})})})});var ut=i(8111),ht=i(2552),mt=i(2809),_t=i(4982);const pt=(0,l.Pi)((()=>{const e=(0,o.useRef)(null),t=(0,o.useRef)(null),[i,l]=(0,o.useState)(null),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),{i18n:m}=(0,s.mV)();if((0,o.useEffect)((()=>{ht.Z.currentUser.isAdmin&&ut.Z.fetchUsers().then((()=>{c(!0)}))}),[]),!ht.Z.currentUser.isAdmin)return(0,g.BX)(d.l0,{children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.user.accounts"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:(0,g.tZ)(s.cC,{id:"auth.message.not.admin"})})})]});const _=!a&&0===ht.Z.users.length,p=U()("interactive-list",{"interactive-list--loading":_});return(0,g.BX)(d.l0,{onSubmit:()=>{if(null==e.current||null==t.current)return;const i=e.current.getFormData();if(null==i.username||""===i.username)l("auth.error.username.empty");else if(null==i.password||""===i.password)l("auth.error.password.empty");else{h(!0);const n=t.current;if(null==n)return l("connection.settings.error.empty"),void h(!1);ut.Z.createUser({username:i.username,password:i.password,client:n,level:!0===i.isAdmin?mt.u.ADMINISTRATOR:mt.u.USER}).then((()=>{null!=e.current&&e.current.resetForm(),l(null),h(!1)}),(()=>{l("general.error.unknown"),h(!1)})).then(ut.Z.fetchUsers)}},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.user.accounts"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.BX)("ul",{className:p,children:[(0,g.tZ)(r.Z,{children:_&&(0,g.tZ)(n.Z,{classNames:"interactive-list__loading-indicator",timeout:{enter:250,exit:250},children:(0,g.tZ)("div",{className:"interactive-list__loading-indicator",children:(0,g.tZ)(d.$z,{})},"loading-indicator")})}),ht.Z.users.slice().sort(((e,t)=>e.username.localeCompare(t.username))).map((e=>{const t=e.username===ht.Z.currentUser.username;let i=null,n=null;t?i=(0,g.tZ)("span",{className:"interactive-list__label__tag tag",children:(0,g.tZ)(s.cC,{id:"auth.current.user"})}):n=(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>ut.Z.deleteUser(e.username).then(ut.Z.fetchUsers),children:(0,g.tZ)(C.x8,{})});const r=U()("interactive-list__item",{"interactive-list__item--disabled":t});return(0,g.BX)("li",{className:r,children:[(0,g.BX)("span",{className:"interactive-list__label",children:[(0,g.tZ)("div",{className:"interactive-list__label__text",children:e.username}),i]}),n]},e.username)}))]})})}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.add.user"})}),i&&(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:m._(i)})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"username",label:(0,g.tZ)(s.cC,{id:"auth.username"}),placeholder:m._("auth.username"),autoComplete:"username"}),(0,g.tZ)(d.fE,{id:"password",label:(0,g.tZ)(s.cC,{id:"auth.password"}),placeholder:m._("auth.password"),autoComplete:"new-password"}),(0,g.tZ)(d.XZ,{grow:!1,id:"isAdmin",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"auth.admin"})})]}),(0,g.tZ)(_t.Z,{onSettingsChange:e=>{t.current=e}}),(0,g.tZ)("p",{}),(0,g.tZ)(d.p7,{justify:"end",children:(0,g.tZ)(d.zx,{isLoading:u,priority:"primary",type:"submit",children:(0,g.tZ)(s.cC,{id:"button.add"})})})]})})),gt=(e,t)=>{var i;return null!=e[t]?e[t]:null===(i=u.Z.clientSettings)||void 0===i?void 0:i[t]},ft=e=>{const t=e.target,i=t.name,{value:n,type:r,checked:l}=t;let a={};return a="checkbox"===r?{[i]:l}:{[i]:n},a};function bt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Zt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(i),!0).forEach((function(t){vt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function vt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const yt=e=>{if(e&&0!==e.length)return e.join(", ")},Ct=(e="")=>""===e?[]:e.replace(/\s/g,"").split(",").map((e=>Number(e))),wt=({onSettingsChange:e,onClientSettingsChange:t})=>{const[i,n]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:({event:r,formData:l})=>{const a=r.target;if("dropdownPresetDownload"===a.name||"dropdownPresetUpload"===a.name)return void e({speedLimits:{download:Ct(l.dropdownPresetDownload),upload:Ct(l.dropdownPresetUpload)}});const s=Zt(Zt({},i),ft(r));n(s),t(s)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:null!=u.Z.floodSettings.speedLimits?yt(u.Z.floodSettings.speedLimits.download):0,label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.dropdown.preset.download.label"}),id:"dropdownPresetDownload"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:null!=u.Z.floodSettings.speedLimits?yt(u.Z.floodSettings.speedLimits.upload):0,label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.dropdown.preset.upload.label"}),id:"dropdownPresetUpload"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleGlobalDownSpeed"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.global.throttle.download"}),id:"throttleGlobalDownSpeed"}),(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleGlobalUpSpeed"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.global.throttle.upload"}),id:"throttleGlobalUpSpeed"})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleMaxUploads"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.upload.label"}),id:"throttleMaxUploads"}),(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleMaxUploadsGlobal"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.upload.global.label"}),id:"throttleMaxUploadsGlobal"})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleMaxDownloads"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.download.label"}),id:"throttleMaxDownloads"}),(0,g.tZ)(d.fE,{defaultValue:gt(i,"throttleMaxDownloadsGlobal"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.download.global.label"}),id:"throttleMaxDownloadsGlobal"})]})]})};function kt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Nt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(i),!0).forEach((function(t){Ot(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const St=({onClientSettingsChange:e})=>{const[t,i]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:({event:n})=>{const r=Nt(Nt({},t),ft(n));i(r),e(r)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.incoming.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"networkPortRange"),id:"networkPortRange",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.range.label"}),width:"one-quarter"}),(0,g.tZ)(d.XZ,{defaultChecked:gt(t,"networkPortRandom"),grow:!1,id:"networkPortRandom",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.randomize.label"})}),(0,g.tZ)(d.XZ,{defaultChecked:gt(t,"networkPortOpen"),grow:!1,id:"networkPortOpen",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.open.label"})})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"networkLocalAddress"),id:"networkLocalAddress",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.ip.hostname.label"})}),(0,g.tZ)(d.fE,{defaultValue:gt(t,"networkHttpMaxOpen"),id:"networkHttpMaxOpen",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.max.http.connections"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.dpd.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"dhtPort"),id:"dhtPort",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.dht.port.label"}),width:"one-quarter"}),(0,g.tZ)(d.XZ,{defaultChecked:gt(t,"dht"),grow:!1,id:"dht",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.dht.label"})}),(0,g.tZ)(d.XZ,{defaultChecked:gt(t,"protocolPex"),grow:!1,id:"protocolPex",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.peer.exchange.label"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"throttleMinPeersNormal"),id:"throttleMinPeersNormal",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.min.label"})}),(0,g.tZ)(d.fE,{defaultValue:gt(t,"throttleMaxPeersNormal"),id:"throttleMaxPeersNormal",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.max.label"})})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"throttleMinPeersSeed"),id:"throttleMinPeersSeed",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.seeding.min.label"})}),(0,g.tZ)(d.fE,{defaultValue:gt(t,"throttleMaxPeersSeed"),id:"throttleMaxPeersSeed",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.seeding.max.label"})})]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:gt(t,"trackersNumWant"),id:"trackersNumWant",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.desired.label"}),width:"one-half"})})]})};var Pt=i(5181),xt=i(8826),Dt=i(6798),Bt=i(3928),jt=i(6436),Xt=i(4387),Tt=i(9242),Et=i.n(Tt),Mt=i(6408);const Vt=Et()([(0,jt.E)("globally-draggable-item",{beginDrag:({list:e,id:t,index:i,isVisible:n})=>({list:e,id:t,index:i,isVisible:n}),canDrag:({isLocked:e})=>!e},((e,t)=>({connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}))),(0,Xt.G)("globally-draggable-item",{drop({onDrop:e}){e&&e()},hover(e,t){const i=t.getItem();e.isLocked||i.index===e.index||i.list===e.list&&(e.onMove(i.index,e.index),i.index=e.index)}},(e=>({connectDropTarget:e.dropTarget()})))])((e=>{const{children:t,isDragging:i,isLocked:n,connectDragPreview:r,connectDragSource:l,connectDropTarget:a}=e;return(0,o.useEffect)((()=>{r((0,Mt.r)(),{captureDraggingState:!0})})),l(a((0,g.BX)("div",{className:U()("sortable-list__item",{"sortable-list__item--is-dragging":i,"sortable-list__item--is-locked":n}),children:[n?(0,g.tZ)(C.HE,{}):null,t]})))}));var It={name:"1d3w5wq",styles:"width:100%"};const Rt=({className:e,id:t,items:i,lockedIDs:n,renderItem:r,onMouseDown:l,onMove:a,onDrop:s})=>{const[d,c]=(0,o.useState)(i),u=U()("sortable-list",e);return(0,g.tZ)("div",{css:It,role:"none",onMouseDown:e=>{l&&l(e)},children:(0,g.tZ)(Bt.WG,{options:Dt.r,children:(0,g.tZ)("ul",{className:u,children:d.map(((e,i)=>{const{id:l,visible:o}=e;return(0,g.tZ)(Vt,{list:t,id:l,index:i,isLocked:n.includes(l),isVisible:o,onDrop:()=>{s&&s(d)},onMove:(e,t)=>{const i=d[e],n=d.slice();n.splice(e,1),n.splice(t,0,i),c(n),a&&a(n)},children:r(e,i)},l)}))})})})};Rt.defaultProps={onMouseDown:void 0,onMove:void 0,onDrop:void 0};const Lt=Rt;function Ft(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function $t(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(i),!0).forEach((function(t){zt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ft(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function zt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ut=({onSettingsChange:e})=>{const[t,i]=(0,o.useState)((()=>{const{mountPoints:e}=u.Z.floodSettings,t=Object.assign({},...xt.Z.disks.map((e=>({[e.target]:e}))));return e.filter((e=>e in t)).map((e=>({id:e,visible:!0}))).concat(Object.keys(t).filter((t=>!e.includes(t))).map((e=>({id:e,visible:!1}))))})());return(0,g.tZ)(Lt,{id:"disks",className:"sortable-list--disks",items:t.slice(),lockedIDs:[],onDrop:e=>{i(e)},renderItem:n=>{const{id:r,visible:l}=n,a=(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:l,id:r,onClick:n=>{const l=t.map((e=>e.id===r?$t($t({},e),{},{visible:n.target.checked}):e));e({mountPoints:l.filter((e=>e.visible)).map((e=>e.id))}),i(l)},children:(0,g.tZ)(s.cC,{id:"settings.diskusage.show"})})});return(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)("div",{children:r})}),a]})}})},Ht=({onSettingsChange:e})=>(0,g.BX)(d.l0,{children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.diskusage.mount.points"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(Ut,{onSettingsChange:e})})]});function At(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function qt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?At(Object(i),!0).forEach((function(t){Gt(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):At(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Gt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Qt=({onClientSettingsChange:e})=>{const[t,i]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:({event:n})=>{const r=qt(qt({},t),ft(n));i(r),e(r)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.resources.disk.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:gt(t,"directoryDefault"),id:"directoryDefault",label:(0,g.tZ)(s.cC,{id:"settings.resources.disk.download.location.label"})})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:gt(t,"networkMaxOpenFiles"),id:"networkMaxOpenFiles",label:(0,g.tZ)(s.cC,{id:"settings.resources.max.open.files"}),width:"one-half"}),(0,g.tZ)(d.XZ,{defaultChecked:gt(t,"piecesHashOnCompletion"),grow:!1,id:"piecesHashOnCompletion",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.resources.disk.check.hash.label"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.resources.memory.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:gt(t,"piecesMemoryMax"),id:"piecesMemoryMax",label:(0,g.BX)("div",{children:[(0,g.tZ)(s.cC,{id:"settings.resources.memory.max.label"})," ",(0,g.tZ)("em",{className:"unit",children:"(MB)"})]}),width:"one-half"})})]})};var Wt=i(7731);var Yt={name:"1d3w5wq",styles:"width:100%"},Jt={name:"15rw530",styles:".sortable-list__item{cursor:default;}"};const Kt=({className:e,checkboxLabel:t,items:i})=>(0,g.tZ)("div",{css:Yt,role:"none",children:(0,g.tZ)("ul",{className:U()("sortable-list",e),css:Jt,children:i.map((e=>{const{id:i,label:n,isLocked:r=!1,defaultChecked:l,onClick:a}=e;return(0,g.BX)("li",{className:U()("sortable-list__item",{"sortable-list__item--is-locked":r}),children:[r?(0,g.tZ)(C.HE,{}):null,(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)(s.cC,{id:n})}),r?null:(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:l,id:i,onClick:e=>null==a?void 0:a(e.target.checked),children:t&&(0,g.tZ)(s.cC,{id:t})})})]})]},i||n)}))})});Kt.defaultProps={className:void 0,checkboxLabel:void 0};const ei=Kt;var ti=i(8737),ii=i(2433);const ni=({onSettingsChange:e})=>{const t=(0,o.useRef)(ii.Z.torrentContextMenuActions.map((({id:e,visible:t})=>{var i;return{id:e,visible:(null===(i=u.Z.floodSettings.torrentContextMenuActions.find((t=>t.id===e)))||void 0===i?void 0:i.visible)??t}})));return(0,g.tZ)(ei,{checkboxLabel:"settings.ui.torrent.context.menu.items.show",items:Object.keys(ti.Z).map((i=>({label:ti.Z[i],isLocked:"start"===i||"stop"===i||"setTaxonomy"===i||"torrentDetails"===i,defaultChecked:t.current.some((e=>e.id===i&&e.visible)),onClick:()=>{const n=t.current.find((e=>e.id===i));null!=n&&(n.visible=!n.visible),e({torrentContextMenuActions:t.current})}})))})};var ri=i(882),li=i(9097);const ai=({torrentListViewSize:e,onSettingsChange:t})=>{const i=(0,o.useRef)(null),[n,r]=(0,o.useState)([...u.Z.floodSettings.torrentListColumns.filter((e=>null!=ri.Z[e.id])).slice(),...Object.keys(ri.Z).filter((e=>u.Z.floodSettings.torrentListColumns.every((t=>t.id!==e)))).map((e=>({id:e,visible:!1})))]),l="expanded"===e?["name","eta","downRate","percentComplete","downTotal","upRate"]:[];return(0,g.tZ)(Lt,{id:"torrent-details",className:"sortable-list--torrent-details",items:n,lockedIDs:l,onMouseDown:()=>{var e;null===(e=i.current)||void 0===e||e.dismissTooltip()},onDrop:e=>{const i=e.slice();t({torrentListColumns:i}),r(i)},renderItem:(a,o)=>{const{id:c,visible:u}=a;let h=null,m=null;if(l.includes(c)||(h=(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:u,id:c,onClick:e=>{const i=n.map((t=>({id:t.id,visible:t.id===c?e.target.checked:t.visible})));t({torrentListColumns:i}),r(i)},children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.details.enabled"})})})),"tags"===c&&"expanded"===e&&o<n.length-1){const e=(0,g.tZ)(s.cC,{id:"settings.ui.torrent.details.tags.placement"});m=(0,g.tZ)(li.Z,{className:"tooltip tooltip--is-error",content:e,offset:-5,ref:i,width:200,wrapperClassName:"sortable-list__content sortable-list__content--secondary tooltip__wrapper",wrapText:!0,children:(0,g.tZ)(C.jj,{})})}return(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[m,(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)(s.cC,{id:ri.Z[c]})}),h]})}})},si=({onSettingsChange:e})=>{const{i18n:t}=(0,s.mV)(),[i,n]=(0,o.useState)(u.Z.floodSettings.torrentListViewSize),[r,l]=(0,o.useState)(u.Z.floodSettings.language),[a,c]=(0,o.useState)(u.Z.floodSettings.UITagSelectorMode);return(0,g.BX)(d.l0,{onChange:({event:t,formData:r})=>{const s=t.target;if("radio"===s.type&&(n(r["ui-torrent-size"]),c(r["ui-tag-selector-mode"]),e({torrentListViewSize:i,UITagSelectorMode:a})),"language"===s.name){const t=r.language;l(t),e({language:t})}},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.language"})},"locale-header"),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Ph,{defaultID:r,id:"language",children:Object.keys(Wt.Z).map((e=>(0,g.tZ)(d.Ql,{id:e,children:null!=Wt.Z[e].id?t._(Wt.Z[e].id):Wt.Z[e]},e)))})},"locale-selection"),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Y8,{defaultChecked:"single"===a,groupID:"ui-tag-selector-mode",id:"single",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode.single"})}),(0,g.tZ)(d.Y8,{defaultChecked:"multi"===a,groupID:"ui-tag-selector-mode",id:"multi",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode.multi"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.list"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Y8,{defaultChecked:"expanded"===i,groupID:"ui-torrent-size",id:"expanded",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.size.expanded"})}),(0,g.tZ)(d.Y8,{defaultChecked:"condensed"===i,groupID:"ui-torrent-size",id:"condensed",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.size.condensed"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.displayed.details"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(ai,{torrentListViewSize:i,onSettingsChange:e})}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.displayed.context.menu.items"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(ni,{onSettingsChange:e})})]})};function oi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function di(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(i),!0).forEach((function(t){ci(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ci(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ui=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),[t,i]=(0,o.useState)({}),[n,r]=(0,o.useState)({}),[l,a]=(0,o.useState)(!1),d=e=>{i(di(di({},t),e))},u=e=>{r(di(di({},n),e))},h=di(di({bandwidth:{content:wt,props:{onClientSettingsChange:d,onSettingsChange:u},label:e._("settings.tabs.bandwidth")},connectivity:{content:St,props:{onClientSettingsChange:d},label:e._("settings.tabs.connectivity")},resources:{content:Qt,props:{onClientSettingsChange:d},label:e._("settings.tabs.resources")}},"none"!==re.Z.authMethod?{authentication:{content:pt,label:e._("settings.tabs.authentication")}}:{}),{},{ui:{content:si,label:e._("settings.tabs.userinterface"),props:{onSettingsChange:u}},diskusage:{content:Ht,label:e._("settings.tabs.diskusage"),props:{onSettingsChange:u}},about:{content:ct,label:e._("settings.tabs.about")}});return(0,g.tZ)(pe,{actions:[{clickHandler:null,content:e._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:()=>{a(!0),Promise.all([c.Z.saveSettings(n,{alert:!0}),Pt.Z.saveSettings(t,{alert:!0})]).then((()=>{a(!1),_.Z.dismissModal()}))},isLoading:l,content:e._("button.save"),triggerDismiss:!1,type:"primary"}],size:"large",heading:e._("settings.tabs.heading"),orientation:re.Z.isSmallScreen?"horizontal":"vertical",tabs:h})})),hi=()=>{const{i18n:e}=(0,s.mV)(),t=(0,o.useRef)(Ze().CancelToken.source()),i=(0,o.useRef)(null),[n,r]=(0,o.useState)(null),[l,a]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var e;const{current:i}=t;var n;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchMediainfo(null===(n=_.Z.activeModal)||void 0===n?void 0:n.hash,t.current.token).then((e=>{r(e.output),u(!1)}),(e=>{Ze().isCancel(e)||(a(e.response.data),u(!1))}));return()=>{i.cancel()}}),[]);let f="mediainfo.heading";return c?f="mediainfo.fetching":l&&(f="mediainfo.execError"),(0,g.BX)("div",{className:"torrent-details__section mediainfo modal__content--nested-scroll__content",children:[(0,g.BX)("div",{className:"mediainfo__toolbar",children:[(0,g.tZ)("div",{className:"mediainfo__toolbar__item",children:(0,g.tZ)("span",{className:"torrent-details__table__heading--tertiary",children:(0,g.tZ)(s.cC,{id:f})})}),n&&(0,g.tZ)(li.Z,{content:e._(h?"general.clipboard.copied":"general.clipboard.copy"),wrapperClassName:"tooltip__wrapper mediainfo__toolbar__item",children:(0,g.tZ)(d.zx,{priority:"tertiary",onClick:()=>{var e;null!=n&&("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText)?navigator.clipboard.writeText(n).then((()=>{p(!0)})):null!=i.current&&(i.current.value=n,i.current.select(),document.execCommand("copy"),p(!0)))},children:h?(0,g.tZ)(C.MC,{}):(0,g.tZ)(C.TU,{})})})]}),(0,g.tZ)("input",{ref:i,style:{width:"0.1px",height:"1px",position:"absolute",right:0}}),l?(0,g.tZ)("pre",{className:"mediainfo__output mediainfo__output--error",children:l.message}):(0,g.tZ)("pre",{className:"mediainfo__output",children:n})]})};function mi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(i),!0).forEach((function(t){pi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const gi=(e,t)=>_i(_i(_i(_i({},e),null!=e.directories?{directories:Object.assign({},...Object.keys(e.directories).map((i=>null!=e.directories?{[i]:gi(e.directories[i],t)}:{})))}:{}),null!=e.files?{files:Object.assign({},...Object.keys(e.files).map((i=>null!=e.files?{[i]:_i(_i({},e.files[i]),{},{isSelected:t})}:{})))}:{}),{},{isSelected:t}),fi=(e,t,i=0)=>{const{depth:n,path:r,select:l,type:a}=t,s=r[i];if(i===n-1){var o;if("file"===a&&null!=(null===(o=e.files)||void 0===o?void 0:o[s])){const t=_i(_i({},e.files),{},{[s]:_i(_i({},e.files[s]),{},{isSelected:l})});return _i(_i({},e),{},{files:t,isSelected:Object.values(t).every((({isSelected:e})=>e))&&(null==e.directories||Object.values(e.directories).every((({isSelected:e})=>e)))})}if("directory"===a&&null!=e.directories){const t=_i(_i({},e.directories),{},{[s]:gi(e.directories[s],l)});return _i(_i({},e),{},{directories:t,isSelected:Object.values(t).every((({isSelected:e})=>e))&&(null==e.files||Object.values(e.files).every((({isSelected:e})=>e)))})}return e}if(null!=e.directories){const n=e.directories;return Object.keys(n).forEach((e=>{e===s&&(n[e]=fi(n[e],t,i+1))})),_i(_i({},e),{},{directories:n,isSelected:Object.values(n).every((({isSelected:e})=>e))})}return e},bi=e=>{const t=[];if(null!=e.files){const{files:i}=e;Object.keys(i).forEach((e=>{const n=i[e];n.isSelected&&t.push(n.index)}))}if(null!=e.directories){const{directories:i}=e;Object.keys(i).forEach((e=>{t.push(...bi(i[e]))}))}return t},Zi={selectAll:gi,applySelection:fi,getSelectedItems:bi,getSelectionTree:(e,t=!1)=>{const i={isSelected:t};return e.forEach((e=>{const n=e.path.split("/");let r=i;for(;n.length-1;){const e=n.shift();null==r.directories&&(r.directories={}),null==r.directories[e]&&(r.directories[e]={isSelected:t}),r=r.directories[e]}null==r.files&&(r.files={}),r.files[e.filename]=_i(_i({},e),{},{isSelected:t})})),i}};var vi=i(2036),yi=i(2104);const Ci=({depth:e,items:t,hash:i,path:n,onItemSelect:r})=>{const[l,a]=(0,o.useState)(null),s=(0,o.useRef)({});if(null==t)return null;const c=Object.values(t).sort(((e,t)=>e.filename.localeCompare(t.filename))).map((o=>{var c;const u=t&&t[o.filename]&&t[o.filename].isSelected||!1,h=U()("directory-tree__node file","directory-tree__node--file directory-tree__node--selectable",{"directory-tree__node--selected":u});return(0,g.BX)("div",{className:h,title:o.filename,children:[(0,g.BX)("div",{className:"file__label file__detail",children:[(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.XZ,{checked:u,id:`${o.index}`,onClick:()=>r({type:"file",depth:e,path:[...n,o.filename],select:!u})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:(0,g.tZ)(C.$B,{})})]}),(0,g.tZ)("div",{className:"file__name",children:(0,g.tZ)("a",{href:`${re.Z.baseURI}api/torrents/${i}/contents/${o.index}/data`,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:o.filename})})]}),(0,g.tZ)("div",{className:"file__detail file__detail--secondary",children:(0,g.tZ)(yi.Z,{value:o.sizeBytes,precision:1})}),(0,g.BX)("div",{className:"file__detail file__detail--secondary",children:[Math.trunc(o.percentComplete),"%"]}),(0,g.tZ)("div",{className:"file__detail file__detail--secondary file__detail--priority",children:(0,g.tZ)(vi.Z,{level:o.priority,id:o.index,maxLevel:2,onChange:(e,t)=>m.Z.setFilePriority(i,{indices:[Number(e)],priority:t}),priorityType:"file"},`${o.index}-${o.filename}`)}),"function"==typeof(null===(c=navigator.clipboard)||void 0===c?void 0:c.writeText)&&(0,g.tZ)("button",{className:"file__detail file__detail--secondary file__detail--clipboard",type:"button",onClick:()=>{const e=e=>{""!==e&&("function"==typeof navigator.share?navigator.share({title:o.filename,url:e}).then((()=>a(o.index))):navigator.clipboard.writeText(e).then((()=>a(o.index))))},t=s.current[o.index];null!=t?e(t):(s.current[o.index]="",m.Z.getTorrentContentsDataPermalink(i,[o.index]).then((t=>{s.current[o.index]=t,e(t)}),(()=>{s.current[o.index]=null})))},children:l===o.index?(0,g.tZ)(C.MC,{}):(0,g.tZ)(C.TU,{})})]},o.filename)}));return(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--file-list",children:c})};var wi={name:"r5l0s9",styles:"width:100%;text-align:left;:focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"};const ki=({depth:e,directoryName:t,id:i,itemsTree:n,hash:r,path:l,isSelected:a,onItemSelect:s})=>{const[c,u]=(0,o.useState)(!1),h=[...l,t];return(0,g.BX)("div",{className:U()("directory-tree__branch",`directory-tree__branch--depth-${e}`,{"directory-tree__node--selected":a}),children:[(0,g.tZ)("button",{className:U()("directory-tree__node","directory-tree__node--selectable directory-tree__node--directory",{"is-expanded":c}),css:wi,type:"button",onClick:()=>u(!c),title:t,children:(0,g.BX)("div",{className:"file__label",children:[(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.XZ,{checked:a,id:i,onClick:()=>s({type:"directory",depth:e,path:h,select:!a})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:c?(0,g.tZ)(C.DB,{}):(0,g.tZ)(C.Bm,{})})]}),(0,g.tZ)("div",{className:"file__name",children:t})]})}),c?(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--group",children:(0,g.tZ)(Ni,{depth:e,hash:r,onItemSelect:s,path:h,itemsTree:n},`${c}-${e}`)}):null]})},Ni=e=>{const{depth:t=0,itemsTree:i,hash:n,path:r,onItemSelect:l}=e,{files:a,directories:s}=i,o=t+1,d=null!=s?Object.keys(s).sort(((e,t)=>e.localeCompare(t))).map(((e,t)=>{const a=i.directories&&i.directories[e],s=`${t}${o}${e}`,d=a&&a.isSelected||!1;return null==a?null:(0,g.tZ)(ki,{depth:o,directoryName:e,hash:n,id:s,isSelected:d,itemsTree:a,onItemSelect:l,path:r},s)})):[],c=null!=a&&Object.keys(a).length>0?(0,g.tZ)(Ci,{depth:o,hash:n,onItemSelect:l,path:r,items:i.files},`files-${o}`):null;return(0,g.tZ)("div",{className:"directory-tree__tree",children:d.concat(c)})},Oi=(0,l.Pi)((()=>{var e,t;const[i,n]=(0,o.useState)([]),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)([]),{i18n:u}=(0,s.mV)();if((0,o.useEffect)((()=>{var e,t;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchTorrentContents(null===(t=_.Z.activeModal)||void 0===t?void 0:t.hash).then((e=>{null!=e&&(n(e),l(Zi.getSelectionTree(e)))}))}),[]),"torrent-details"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const{hash:h}=null===_.Z||void 0===_.Z?void 0:_.Z.activeModal;let p=null,f=null,b=!1;(null==i?void 0:i.length)>0?(b=a.length>=i.length,p=(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.XZ,{checked:b,id:"select-all",onClick:()=>{const e=Zi.getSelectionTree(i,a.length<i.length);l(e),c(Zi.getSelectedItems(e))}})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:(0,g.tZ)(C.Zz,{})})]}),f=(0,g.tZ)(Ni,{depth:0,onItemSelect:e=>{const t=Zi.applySelection(r,e);l(t),c(Zi.getSelectedItems(t))},hash:h,path:[],itemsTree:r})):(p=(0,g.tZ)(C.Zz,{}),f=(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--file",children:(0,g.tZ)(s.cC,{id:"torrents.details.files.loading"})}));const Z=U()("directory-tree__node","directory-tree__parent-directory torrent-details__section__heading",{"directory-tree__node--selected":b}),v=(0,g.tZ)("div",{className:Z,children:(0,g.BX)("div",{className:"file__label",children:[p,(0,g.tZ)("div",{className:"file__name",children:null===(t=Je.Z.torrents)||void 0===t?void 0:t[h].directory})]})}),y=U()("inverse directory-tree__wrapper",{"directory-tree__wrapper--toolbar-visible":a.length>0});return(0,g.BX)(d.l0,{className:y,onChange:({event:e})=>{if(null!=e.target&&"file-priority"===e.target.name){const t=e.target;t.value&&m.Z.setFilePriority(h,{indices:a,priority:Number(t.value)})}},children:[(0,g.tZ)("div",{className:"directory-tree__selection-toolbar",children:(0,g.BX)(d.p7,{align:"center",children:[(0,g.tZ)(d.U2,{width:"one-quarter",grow:!1,shrink:!1,children:(0,g.tZ)(s.cC,{id:"torrents.details.selected.files",values:{count:a.length,countElement:(0,g.tZ)("span",{className:"directory-tree__selection-toolbar__item-count",children:a.length})}})}),(0,g.tZ)(d.zx,{onClick:e=>{e.preventDefault();const{baseURI:t}=re.Z,i=document.createElement("a");i.download="",i.href=`${t}api/torrents/${h}/contents/${a.join(",")}/data`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},grow:!1,shrink:!1,children:(0,g.tZ)(s.cC,{id:"torrents.details.files.download.file",values:{count:a.length}})}),(0,g.BX)(d.Ph,{id:"file-priority",persistentPlaceholder:!0,shrink:!1,defaultID:"",children:[(0,g.tZ)(d.Ql,{id:-1,isPlaceholder:!0,children:(0,g.tZ)(s.cC,{id:"torrents.details.selected.files.set.priority"})}),(0,g.tZ)(d.Ql,{id:0,children:u._("priority.dont.download")}),(0,g.tZ)(d.Ql,{id:1,children:u._("priority.normal")}),(0,g.tZ)(d.Ql,{id:2,children:u._("priority.high")})]})]})}),(0,g.BX)("div",{className:"directory-tree torrent-details__section torrent-details__section--file-tree modal__content--nested-scroll__content",children:[v,f]})]})})),Si=(0,l.Pi)((()=>{var e;const{i18n:t}=(0,s.mV)();if("torrent-details"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const i=Je.Z.torrents[_.Z.activeModal.hash];if(null==i)return null;const n=(0,g.tZ)("span",{className:"not-available",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.none"})});return(0,g.tZ)("div",{className:"torrent-details__section torrent-details__section--general",children:(0,g.tZ)("table",{className:"torrent-details__table table",children:(0,g.BX)("tbody",{children:[(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.general"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateAdded",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.added"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.dateAdded>0?t.date(new Date(1e3*i.dateAdded),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):n})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--location",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.location"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.directory})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--tags",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.tags"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.tags.length?(r=i.tags,r.map((e=>(0,g.tZ)("span",{className:"tag",children:e},e)))):n})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.transfer"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateFinished",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.finished"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.dateFinished>0?t.date(new Date(1e3*i.dateFinished),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):n})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--downloaded",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.downloaded"})}),(0,g.BX)("td",{className:"torrent-details__detail__value",children:[t.number(i.percentComplete),(0,g.tZ)("em",{className:"unit",children:"%"})]})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--peers",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.peers"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.connected",values:{connectedCount:i.peersConnected,connected:t.number(i.peersConnected),total:t.number(i.peersTotal)}})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--seeds",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.seeds"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.connected",values:{connectedCount:i.seedsConnected,connected:t.number(i.seedsConnected),total:t.number(i.seedsTotal)}})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateActive",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.active"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:0===i.dateActive?n:-1===i.dateActive?t._("torrents.details.general.date.active.now"):t.date(new Date(1e3*i.dateActive),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"})})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.torrent"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--created",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.created"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.dateCreated>0?t.date(new Date(1e3*i.dateCreated),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):n})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--hash",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.hash"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.hash})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--size",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.size"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(yi.Z,{value:i.sizeBytes})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--type",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.type"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.isPrivate?t._("torrents.details.general.type.private"):t._("torrents.details.general.type.public")})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.tracker"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--tracker-message",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.tracker.message"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:i.message?i.message:n})]})]})})});var r}));var Pi=i(3006),xi=i(228),Di=i(369),Bi=i(6531);const ji=(0,l.Pi)((()=>{var e;const{i18n:t}=(0,s.mV)(),i="torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)?Je.Z.torrents[_.Z.activeModal.hash]:void 0,[n,r]=(0,o.useState)("stop");if((0,o.useEffect)((()=>{null!=i&&i.status.includes("stopped")?r("stop"):r("start")}),[null==i?void 0:i.status]),null==i)return null;const l=(0,Pi.Z)({status:i.status,upRate:i.upRate,downRate:i.downRate},"torrent-details__header");return(0,g.BX)("div",{className:l,children:[(0,g.tZ)("h1",{className:"torrent-details__heading torrent-details--name",children:i.name}),(0,g.BX)("div",{className:"torrent-details__sub-heading",children:[(0,g.BX)("ul",{className:"torrent-details__sub-heading__secondary",children:[(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary torrent-details__sub-heading__tertiary--download",children:[(0,g.tZ)(C.ki,{}),(0,g.tZ)(yi.Z,{value:i.downRate,isSpeed:!0}),"",(0,g.tZ)(yi.Z,{value:i.bytesDone})]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary torrent-details__sub-heading__tertiary--upload",children:[(0,g.tZ)(C.u3,{}),(0,g.tZ)(yi.Z,{value:i.upRate,isSpeed:!0}),"",(0,g.tZ)(yi.Z,{value:i.upTotal})]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary",children:[(0,g.tZ)(C.T_,{}),t.number(i.ratio)]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary",children:[(0,g.tZ)(C.SU,{}),(0,g.tZ)(xi.Z,{value:i.eta})]})]}),(0,g.BX)("ul",{className:"torrent-details__sub-heading__secondary",children:[(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.tZ)(vi.Z,{id:i.hash,level:i.priority,maxLevel:3,priorityType:"torrent",onChange:(e,t)=>{m.Z.setPriority({hashes:[`${e}`],priority:t})}})},"priority-meter"),(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.BX)("button",{className:U()("torrent-details__action",{"is-active":"start"===n}),type:"button",onClick:()=>{r("start"),m.Z.startTorrents({hashes:[i.hash]})},children:[(0,g.tZ)(C.zf,{}),(0,g.tZ)(s.cC,{id:"torrents.details.actions.start"})]})},"start"),(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.BX)("button",{className:U()("torrent-details__action",{"is-active":"stop"===n}),type:"button",onClick:()=>{r("stop"),m.Z.stopTorrents({hashes:[i.hash]})},children:[(0,g.tZ)(C.dV,{}),(0,g.tZ)(s.cC,{id:"torrents.details.actions.stop"})]})},"stop")]})]}),(0,g.tZ)(Di.Z,{percent:Math.ceil(i.percentComplete),icon:(0,g.tZ)(Bi.Z,{statuses:i.status})})]})}));var Xi=i(3337),Ti=i(8447);var Ei={name:"17lw7on",styles:"td{max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"};const Mi=()=>{const[e,t]=(0,o.useState)([]),[i,n]=(0,o.useState)(null),r=()=>{var e,i;(n(null),"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))&&m.Z.fetchTorrentPeers(null===(i=_.Z.activeModal)||void 0===i?void 0:i.hash).then((e=>{null!=e&&t(e)}));n(re.Z.pollInterval)};return(0,o.useEffect)((()=>r()),[]),(0,Xi.Z)((()=>r()),i),(0,g.tZ)("div",{className:"torrent-details__section torrent-details__section--peers",children:(0,g.BX)("table",{className:"torrent-details__table table",css:Ei,children:[(0,g.tZ)("thead",{className:"torrent-details__table__heading",children:(0,g.BX)("tr",{children:[(0,g.BX)("th",{className:"torrent-details__table__heading--primary",children:[(0,g.tZ)(s.cC,{id:"torrents.details.peers"}),(0,g.tZ)(Ti.Z,{children:e.length})]}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"DL"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"UL"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"%"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"Client"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"Enc"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"In"})]})}),(0,g.tZ)("tbody",{children:e.map((e=>{const{country:t}=e,i=e.isEncrypted?(0,g.tZ)(C.HE,{}):null,n=e.isIncoming?(0,g.tZ)(C.FV,{}):null;return(0,g.BX)("tr",{children:[(0,g.BX)("td",{children:[(0,g.BX)("span",{className:"peers-list__flag",children:[(0,g.tZ)(o.Suspense,{fallback:(0,g.tZ)(C.$j,{}),children:(0,g.tZ)(C.AW,{countryCode:t})}),(0,g.tZ)("span",{className:"peers-list__flag__text",children:t})]}),e.address]}),(0,g.tZ)("td",{children:(0,g.tZ)(yi.Z,{value:e.downloadRate,isSpeed:!0})}),(0,g.tZ)("td",{children:(0,g.tZ)(yi.Z,{value:e.uploadRate,isSpeed:!0})}),(0,g.tZ)("td",{children:`${Math.ceil(e.completedPercent)}%`}),(0,g.tZ)("td",{children:e.clientVersion}),(0,g.tZ)("td",{className:"peers-list__encryption",children:i}),(0,g.tZ)("td",{className:"peers-list__incoming",children:n})]},e.address)}))})]})})},Vi=()=>{const[e,t]=(0,o.useState)([]),i=e.length,n=["http","udp","dht"],r=e.map((e=>(0,g.BX)("tr",{children:[(0,g.tZ)("td",{children:e.url}),(0,g.tZ)("td",{children:n[e.type-1]})]},e.url)));return(0,o.useEffect)((()=>{var e,i;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchTorrentTrackers(null===(i=_.Z.activeModal)||void 0===i?void 0:i.hash).then((e=>{null!=e&&t(e)}))}),[]),(0,g.tZ)("div",{className:"torrent-details__trackers torrent-details__section",children:(0,g.BX)("table",{className:"torrent-details__table table",children:[(0,g.tZ)("thead",{className:"torrent-details__table__heading",children:(0,g.BX)("tr",{children:[(0,g.BX)("th",{className:"torrent-details__table__heading--primary",children:[(0,g.tZ)(s.cC,{id:"torrents.details.trackers"}),(0,g.tZ)(Ti.Z,{children:i})]}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:(0,g.tZ)(s.cC,{id:"torrents.details.trackers.type"})})]})}),(0,g.tZ)("tbody",{children:r})]})})},Ii=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),{isSmallScreen:t}=re.Z,i={"torrent-details":{content:Si,label:e._("torrents.details.details")},"torrent-contents":{content:Oi,label:e._("torrents.details.files"),modalContentClasses:"modal__content--nested-scroll"},"torrent-peers":{content:Mi,label:e._("torrents.details.peers")},"torrent-trackers":{content:Vi,label:e._("torrents.details.trackers")},"torrent-mediainfo":{content:hi,label:e._("torrents.details.mediainfo"),modalContentClasses:"modal__content--nested-scroll"}};return(0,g.tZ)(pe,{heading:(0,g.tZ)(ji,{},"torrent-heading"),size:"large",tabs:i,orientation:t?"horizontal":"vertical",tabsInBody:!t})})),Ri=e=>{switch(e){case"add-torrents":return(0,g.tZ)(ge,{});case"confirm":return(0,g.tZ)(fe,{});case"feeds":return(0,g.tZ)(Ye,{});case"generate-magnet":return(0,g.tZ)(tt,{});case"move-torrents":return(0,g.tZ)(nt,{});case"remove-torrents":return(0,g.tZ)(rt,{});case"set-taxonomy":return(0,g.tZ)(lt,{});case"set-trackers":return(0,g.tZ)(at,{});case"settings":return(0,g.tZ)(ui,{});case"torrent-details":return(0,g.tZ)(Ii,{});default:return null}},Li=(0,l.Pi)((()=>{const{id:e}=_.Z.activeModal||{};let t;return(0,a.Z)("Escape",(()=>p.Z.dismissModal())),null!=e&&(t=(0,g.tZ)(n.Z,{classNames:"modal__animation",timeout:{enter:500,exit:500},children:(0,g.BX)("div",{className:"modal",children:[(0,g.tZ)("div",{className:"modal__overlay",role:"none",onClick:()=>{p.Z.dismissModal()}}),Ri(e)]})},e)),(0,g.tZ)(r.Z,{children:t})}))}}]);